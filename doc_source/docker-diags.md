# Docker diagnostics<a name="docker-diags"></a>

Docker provides several diagnostic tools that help you troubleshoot problems with your containers and tasks\. For more information about all of the available Docker command line utilities, see the [Docker Command Line](https://docs.docker.com/engine/reference/commandline/cli/) topic in the Docker documentation\. You can access the Docker command line utilities by connecting to a container instance using SSH\. For more information, see [Connect to your container instance](instance-connect.md)\.

The exit codes that Docker containers report can also provide some diagnostic information \(for example, exit code 137 means that the container received a `SIGKILL` signal\)\. For more information, see [Exit Status](https://docs.docker.com/engine/reference/run/#exit-status) in the Docker documentation\.

## List Docker containers<a name="docker-ps"></a>

You can use the docker ps command on your container instance to list the running containers\. In the below example, only the Amazon ECS container agent is running\. For more information, see [docker ps](https://docs.docker.com/engine/reference/commandline/cli/#ps) in the Docker documentation\.

```
docker ps
```

Output:

```
CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS                        NAMES
cee0d6986de0        amazon/amazon-ecs-agent:latest   "/agent"            22 hours ago        Up 22 hours         127.0.0.1:51678->51678/tcp   ecs-agent
```

You can use the docker ps \-a command to see all containers \(even stopped or killed containers\)\. This is helpful for listing containers that are unexpectedly stopping\. In the following example, container `f7f1f8a7a245` exited 9 seconds ago, so it does not show up in a docker ps output without the `-a` flag\.

```
docker ps -a
```

Output:

```
CONTAINER ID        IMAGE                                       COMMAND                CREATED             STATUS                        PORTS                        NAMES
db4d48e411b1        amazon/ecs-emptyvolume-base:autogenerated   "not-applicable"       19 seconds ago                                                                 ecs-console-sample-app-static-6-internalecs-emptyvolume-source-c09288a6b0cba8a53700
f7f1f8a7a245        busybox:buildroot-2014.02                   "\"sh -c '/bin/sh -c   22 hours ago        Exited (137) 9 seconds ago                                 ecs-console-sample-app-static-6-busybox-ce83ce978a87a890ab01
189a8ff4b5f0        httpd:2                                     "httpd-foreground"     22 hours ago        Exited (137) 40 seconds ago                                ecs-console-sample-app-static-6-simple-app-86caf9bcabe3e9c61600
0c7dca9321e3        amazon/ecs-emptyvolume-base:autogenerated   "not-applicable"       22 hours ago                                                                   ecs-console-sample-app-static-6-internalecs-emptyvolume-source-90fefaa68498a8a80700
cee0d6986de0        amazon/amazon-ecs-agent:latest              "/agent"               22 hours ago        Up 22 hours                   127.0.0.1:51678->51678/tcp   ecs-agent
```

## View Docker Logs<a name="docker-logs"></a>

You can view the `STDOUT` and `STDERR` streams for a container with the docker logs command\. In this example, the logs are displayed for the *dc7240fe892a* container and piped through the head command for brevity\. For more information, go to [docker logs](https://docs.docker.com/engine/reference/commandline/cli/#logs) in the Docker documentation\.

**Note**  
Docker logs are only available on the container instance if you are using the default `json` log driver\. If you have configured your tasks to use the `awslogs` log driver, then your container logs are available in CloudWatch Logs\. For more information, see [Using the awslogs log driver](using_awslogs.md)\.

```
docker logs dc7240fe892a | head
```

Output:

```
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.11. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.11. Set the 'ServerName' directive globally to suppress this message
[Thu Apr 23 19:48:36.956682 2015] [mpm_event:notice] [pid 1:tid 140327115417472] AH00489: Apache/2.4.12 (Unix) configured -- resuming normal operations
[Thu Apr 23 19:48:36.956827 2015] [core:notice] [pid 1:tid 140327115417472] AH00094: Command line: 'httpd -D FOREGROUND'
10.0.1.86 - - [23/Apr/2015:19:48:59 +0000] "GET / HTTP/1.1" 200 348
10.0.0.154 - - [23/Apr/2015:19:48:59 +0000] "GET / HTTP/1.1" 200 348
10.0.1.86 - - [23/Apr/2015:19:49:28 +0000] "GET / HTTP/1.1" 200 348
10.0.0.154 - - [23/Apr/2015:19:49:29 +0000] "GET / HTTP/1.1" 200 348
10.0.1.86 - - [23/Apr/2015:19:49:50 +0000] "-" 408 -
10.0.0.154 - - [23/Apr/2015:19:49:50 +0000] "-" 408 -
10.0.1.86 - - [23/Apr/2015:19:49:58 +0000] "GET / HTTP/1.1" 200 348
10.0.0.154 - - [23/Apr/2015:19:49:59 +0000] "GET / HTTP/1.1" 200 348
10.0.1.86 - - [23/Apr/2015:19:50:28 +0000] "GET / HTTP/1.1" 200 348
10.0.0.154 - - [23/Apr/2015:19:50:29 +0000] "GET / HTTP/1.1" 200 348
time="2015-04-23T20:11:20Z" level="fatal" msg="write /dev/stdout: broken pipe"
```

## Inspect Docker Containers<a name="docker-inspect"></a>

If you have the Docker ID of a container, you can inspect it with the docker inspect command\. Inspecting containers provides the most detailed view of the environment in which a container was launched\. For more information, see [docker inspect](https://docs.docker.com/engine/reference/commandline/cli/#inspect) in the Docker documentation\.

```
docker inspect dc7240fe892a
```

Output:

```
[{
    "AppArmorProfile": "",
    "Args": [],
    "Config": {
        "AttachStderr": false,
        "AttachStdin": false,
        "AttachStdout": false,
        "Cmd": [
            "httpd-foreground"
        ],
        "CpuShares": 10,
        "Cpuset": "",
        "Domainname": "",
        "Entrypoint": null,
        "Env": [
            "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/apache2/bin",
            "HTTPD_PREFIX=/usr/local/apache2",
            "HTTPD_VERSION=2.4.12",
            "HTTPD_BZ2_URL=https://www.apache.org/dist/httpd/httpd-2.4.12.tar.bz2"
        ],
        "ExposedPorts": {
            "80/tcp": {}
        },
        "Hostname": "dc7240fe892a",
...
```